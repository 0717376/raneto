---
Title: HTTP-запрос
Sort: 4
---

В этом уроке вы познакомитесь ближе с HTTP (HTTPS) — протоколом прикладного уровня сетевой модели TCP/IP, а также изучите его составляющие.

### HTTP-протокол

Правила взаимодействия между устройствами в сети Интернет устанавливает протокол прикладного уровня HTTP. Он регулирует правила формирования запроса от веб-браузера (клиента) к веб-серверу (серверу).

**HTTP (Hypertext Transfer Protocol)** — это основной протокол для обмена данными между компьютерами в сети Интернет. Сочетание из четырёх букв — HTTP — видел каждый, кто выходит в интернет через веб-браузер, ведь именно с названия протокола начинаются адреса веб-сайтов.

Как только вы вводите адрес, который начинается с `http://`, веб-браузер понимает, что для общения с веб-сервером нужно соблюдать протокол HTTP.

Сейчас гораздо чаще встречаются адреса, которые начинаются с `https://`. Например, адрес веб-сайта Яндекс Практикума `https://practicum.yandex.ru` начинается как раз с `https`.

Протокол передачи гипертекста через **SSL (Hypertext Transfer Protocol over Secure Socket Layer — HTTPS)** — это «младший брат» HTTP, который серьёзнее относится к вашей безопасности в сети: он шифрует часть передаваемых данных в соответствии с протоколом SSL. Таким образом, злоумышленникам становится гораздо сложнее похитить данные.

### HTTP-запрос

Взаимодействие через HTTP основывается на концепции запрос-ответ (Request-Response Cycle). Клиент отправляет на сервер запрос на выполнение определённых действий. Сервер, в свою очередь, отправляет клиенту ответ, сообщая, смог ли сервер выполнить запрос клиента.

<img src="%base_url%/images/CA-09-Sprint-001-15_1675154273.png"/>
<br><br>

HTTP-запрос клиента к веб-серверу должен включать:
- URL.
- Метод.
- Заголовки.
- Тело.

<img src="%base_url%/images/FT-L04-01_1675154309.png"/>
<br><br>

Например, HTTP-запрос клиента к серверу может выглядеть так:

<img src="%base_url%/images/CA-00-FreeTrack_FT-L04-11_1_1675154353.png"/>
<br><br>

Этот запрос и остальные примеры в уроке написаны с использованием стиля представления данных JSON.

### URL

Чтобы клиент мог получить данные, он должен знать, где веб-сервер их хранит. То есть он должен знать адрес ресурса — **унифицированный указатель ресурса (Uniform Resource Locator — URL).**

<img src="%base_url%/images/FT-L04-02_1675154595.png"/>
<br><br>

### Адрес ресурса

Рассмотрим на примере столового этикета, который устанавливает правила сервировки стола. Самое важное в сервировке — правильно расположить посуду и приборы.

Каждому гостю, к примеру, полагается пять вилок: для салата, для рыбы, для мяса, для морепродуктов и десертная вилка. Благодаря правилам сервировки гость знает: вилка, которая расположена справа от тарелки, предназначена для морепродуктов, над тарелкой — для десерта.

<img src="%base_url%/images/FT-L04-06_1675154637.png"/>
<br><br>

Также веб-браузер знает расположение данных на сервере и может их использовать. Данные, которые хранит веб-сервер, называются **ресурсами (Resources).** Например, ресурсами могут быть **веб-страницы, изображения, видео.

Веб-страницу, на которой вы сейчас находитесь, хранит веб-сервер Яндекс Практикума. Любой веб-браузер может запросить её у веб-сервера для просмотра. Веб-сайт же состоит из множества веб-страниц.

Веб-сервер хранит ресурсы в виде иерархии. Иерархию можно представить как папку со множеством вложенных папок, в которые также входит множество папок и так далее. Как именно ресурсы будут располагаться на веб-сервере, зависит от решения разработчиков.

Например, так:

<img src="%base_url%/images/FT-L04-07_1675154678.png"/>
<br><br>

Или так:

<img src="%base_url%/images/FT-L04-08_1675154708.png"/>
<br><br>

Используя иерархию, можно описать место любого предмета. Например, вилки для морепродуктов: `стол/справа от тарелки/вилка для морепродуктов` или `стол/вилка/для морепродуктов`.

Место на веб-сервере, где хранится ресурс, и называется **URL**. Посмотрим на URL с веб-сайта Яндекс Практикума:
- https://practicum.yandex.ru/
- https://practicum.yandex.ru/systems-analyst/
- https://practicum.yandex.ru/qa-engineer/

Вы уже знаете, что `https` в начале URL — это сигнал веб-браузеру, что общаться с веб-сервером он должен в соответствии с правилами протокола HTTP (обычно HTTPS приравнивают к HTTP).

После названия протокола следует название веб-сервера — practicum.yandex.ru. Сразу за названием веб-сервера — путь до ресурса на веб-сервере: `/systems-analyst` или `/qa-engineer`.

С помощью URL `https://practicum.yandex.ru/systems-analyst/` можно описать путь до веб-страницы курса «Системный аналитик», а с помощью URL `https://practicum.yandex.ru/qa-engineer/` — до веб-страницы курса «Инженер по тестированию».

### Метод

Веб-браузер может по-разному использовать данные, которые хранит веб-сервер: он может отправить веб-серверу запрос на просмотр, замену или удаление ресурса, а может передать веб-серверу новые данные для хранения, то есть попросить веб-сервер создать ресурс.

Действие, которое веб-сервер должен выполнить, чтобы удовлетворить запрос веб-браузера, называется методом (Method). Чтобы получить данные, веб-браузер клиента должен понимать, какие действия над ресурсами может совершать веб-сервер и какие методы HTTP-запроса им соответствуют.

<img src="%base_url%/images/FT-L04-03_1675155229.png"/>
<br><br>

### Основные методы HTTP

Основные методы, которые предоставляет HTTP, это:
- **POST — создание ресурса** 

    Веб-браузер передаёт на веб-сервер определённый ресурс, который он должен записать у себя определённым образом.
- **GET — чтение ресурса** 

    Веб-браузер запрашивает у веб-сервера определённый ресурс и получает его в ответ. Например, когда вы открываете главную страницу веб-сайта Яндекс Практикума, ваш веб-браузер использует метод GET.
- **PUT — замена ресурса** 

    Веб-браузер может заменить существующий на веб-сервере ресурс.
- **DELETE — удаление ресурса** 

    Веб-браузер может удалить ресурс с веб-сервера.

### Другие методы

POST, DELETE, GET и PUT — основные запросы, которые встречаются чаще всего. В работе системный аналитик может встретить и другие методы:
- **CONNECT** — метод для установления тоннеля (двусторонней связи) между клиентом и сервером.
- **HEAD** — запрашивает заголовки, идентичные тем, которые будут возвращены при вызове метода GET. Может быть выполнен перед загрузкой большого ресурса для получения данных о ресурсе.
- **OPTION** — метод запроса данных о методах, поддерживаемых ресурсом.
- **PATCH** — метод выборочного обновления существующего ресурса.
- **TRACE** — метод для проверки соединения. Получатель должен отразить полученное сообщение назад клиенту в теле ответа.

#### Безопасность и идемпотентность методов

Методы обладают характеристиками идемпотентности и безопасности.

**Идемпотентность (Idempotence)** — это свойство объекта или операции, при котором многократное выполнение операции приводит к одному и тому же результату. Пример идемпотентной операции — умножение на 1.

Если отправить запрос GET `http://предметы-сервировки-стола.рф/кофейная-пара/блюдце/2`, в ответ получим ресурс — блюдце с идентификатором 2. Если отправить этот запрос повторно, то ответ будет тот же. Это и есть идемпотентность: при выполнении операции результат всегда будет одинаковым. 

Если отправить запрос POST на создание нового ресурса «красное блюдце», то каждый раз, когда мы будем вызывать этот метод, на сервере будет создаваться новый ресурс «красное блюдце». И каждый раз в ответе мы будем получать разные блюдца одинакового цвета, но с разными идентификаторами. Таким образом, метод POST не является идемпотентным, так как при выполнении операции результат каждый раз будет разным. 

Метод также может быть безопасным или небезопасным.

**Безопасный метод** — метод, предназначенный для получения информации и не изменяющий состояние сервера.

Например, нужно создать ещё один ресурс — блюдце:

```JSX
POST http://предметы-сервировки-стола.рф/кофейная-пара/блюдце/
Body: 
{
“material”: “фарфор",
“diameter”: “15"
}
```

Этот метод является небезопасным, так как при выполнении запроса на сервере создаётся новый ресурс (состояние сервера изменяется, на нём создается ещё один ресурс).

Ниже представлена таблица с характеристиками и описанием методов.

<img src="%base_url%/images/CA-09-Sprint-001-08_1675155373.png"/>
<br><br>

### Заголовки

**Заголовок (Header)** — часть HTTP-запроса, которая содержит техническую информацию, необходимую для формирования запроса или ответа.

В заголовках веб-браузер собирает для веб-сервера техническую информацию, например, о типе устройства (о телефоне, компьютере), о языке пользователя (русском, английском или другом) и прочие важные параметры. Они необходимы для корректного отображения информации клиенту.

<img src="%base_url%/images/FT-L04-04_1675155459.png"/>
<br><br>

Именно из заголовка веб-сервер, например, узнает, что веб-браузер запросил мобильную версию веб-сайта, если вы зашли на платформу Яндекс Практикума с мобильного устройства.

Заголовок может выглядеть так:

```JSON
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 (.NET CLR 3.5.30729)
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5 
```

Из этого заголовка веб-сервер узнает, что используется браузер Mozilla Firefox на устройстве с операционной системой Windows, а язык пользователя — английский.

Параметры заголовка передаются в паре **ключ:значение** **(Key:Value)**. Например, User-Agent — это название параметра, передающего данные об устройстве клиента, а данные после двоеточия — конкретное значение параметра в данном запросе (то, какую операционную систему или браузер использует клиент).

### Тело

Веб-сервер и веб-браузер передают друг другу данные в **теле (Body)** HTTP-запроса.

<img src="%base_url%/images/FT-L04-05_1675155484.png"/>
<br><br>

Тело включают только HTTP-запросы с методами POST и PUT — веб-браузер должен передать веб-серверу данные о ресурсах, которые веб-сервер должен создать или изменить. В HTTP-запросах с методами GET и DELETE, то есть в запросах на чтение и удаление ресурсов, тело не добавляется — достаточно адреса запрашиваемого ресурса, метода и заголовков.

Например, в коллекции столовых приборов и посуды нужно создать новый бокал для красного вина. В этом случае запрос будет выглядеть так:

```JSON
POST http://предметы-сервировки-стола.рф/бокал/для-красного-вина` 
Body: 
{
“volume”: “140",
“height”: “25",
"material": "стекло" 
} 
```

Тело запроса начинается с ключа `Body:` и пишется в фигурных скобках`{}`. Веб-браузер должен оформить данные в теле HTTP-запроса так, чтобы веб-сервер мог их понять. Для этого в теле запроса записываются параметры, о которых вы узнаете в следующем уроке.

### Подведём итоги

**HTTP (Hypertext Transfer Protocol)** — это основной протокол для обмена данными между компьютерами в сети Интернет. 

Взаимодействие через HTTP основывается на концепции запрос-ответ (Request-Response Cycle). Клиент отправляет на сервер запрос на выполнение определённых действий. Сервер, в свою очередь, отправляет клиенту ответ, сообщая, смог ли сервер выполнить запрос клиента.

HTTP-запрос клиента к веб-серверу должен включать:
- **URL (Uniform Resource Locator) — унифицированный указатель ресурса** 

    Определяет адрес ресурса на сервере. 
- **Метод** 

    Указывает серверу на действие, которое он должен выполнить, чтобы удовлетворить запрос клиента. POST, GET, PUT и DELETE — основные методы, которые предоставляет HTTP-протокол.
- **Заголовки** 

    Передают серверу техническую информацию о клиенте.
- **Тело** 

    Передаёт данные о запрашиваемых ресурсах, а также данные, которые необходимо создать или изменить.

Заголовки и тело запроса должны содержать параметры. Подробнее с ними вы познакомитесь в следующем уроке.